<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Save Index</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Roboto:wght@300;400&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #0a0f1f;
            --primary-glow: #00e5ff;
            --secondary-glow: #ff00e5;
            --text-color: #e0e0e0;
            --card-bg: rgba(20, 25, 40, 0.6);
            --card-border: rgba(0, 229, 255, 0.2);
            --card-shadow: rgba(0, 229, 255, 0.1);
            --loader-color: var(--primary-glow);
        }

        @keyframes background-pan {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes fade-in-up {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--bg-color);
            background-image: radial-gradient(circle at 1% 1%, var(--primary-glow), transparent 25%), radial-gradient(circle at 99% 99%, var(--secondary-glow), transparent 25%);
            background-size: 200% 200%;
            color: var(--text-color);
            margin: 0;
            padding: 0;
            min-height: 100vh;
            animation: background-pan 20s ease infinite;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        header {
            text-align: center;
            margin-bottom: 3rem;
            animation: fade-in-up 0.8s ease-out;
        }

        header h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 3rem;
            color: #fff;
            text-shadow: 0 0 10px var(--primary-glow), 0 0 20px var(--primary-glow);
            margin: 0;
        }

        #save-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
        }

        .save-card {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 12px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px 0 var(--card-shadow);
            transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
            opacity: 0;
            animation: fade-in-up 0.5s ease-out forwards;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .save-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 12px 40px 0 var(--card-shadow);
            border-color: var(--primary-glow);
        }

        .card-content {
            padding: 1.5rem;
            flex-grow: 1;
        }

        .card-content h2 {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5rem;
            color: var(--primary-glow);
            margin: 0 0 0.5rem 0;
        }

        .card-content p {
            font-size: 0.9rem;
            color: #ccc;
            margin: 0.25rem 0;
        }

        .download-button {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            background: linear-gradient(45deg, var(--primary-glow), var(--secondary-glow));
            color: #fff;
            text-align: center;
            padding: 1rem;
            text-decoration: none;
            font-weight: 700;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .download-button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px var(--primary-glow);
        }

        .download-button svg {
            width: 20px;
            height: 20px;
        }

        .loader-container {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 4rem;
        }

        .loader {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(255, 255, 255, 0.2);
            border-top-color: var(--loader-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        .info-message {
            text-align: center;
            padding: 2rem;
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 12px;
            backdrop-filter: blur(10px);
        }

        footer {
            text-align: center;
            padding: 2rem;
            margin-top: 2rem;
            font-size: 0.9rem;
            color: #aaa;
        }

        footer a {
            color: var(--primary-glow);
            text-decoration: none;
            transition: text-shadow 0.3s ease;
        }

        footer a:hover {
            text-shadow: 0 0 5px var(--primary-glow);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Game Save Index</h1>
        </header>
        <main id="save-container">
            <div class="loader-container">
                <div class="loader"></div>
            </div>
        </main>
        <footer>
            <p>Powered by <a href="https://github.com/ravisairockey/Game-save-index" target="_blank">Game-save-index</a></p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const username = 'ravisairockey';
            const repo = 'Game-save-index';
            const savesPath = 'saves';
            const container = document.getElementById('save-container');

            const apiUrl = `https://api.github.com/repos/${username}/${repo}/contents/${savesPath}`;

            const formatBytes = (bytes, decimals = 2) => {
                if (bytes === 0) return '0 Bytes';
                const k = 1024;
                const dm = decimals < 0 ? 0 : decimals;
                const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];
            };

            const displayMessage = (message) => {
                container.innerHTML = `<div class="info-message"><p>${message}</p></div>`;
            };

            fetch(apiUrl)
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`Network response was not ok: ${response.statusText}`);
                    }
                    return response.json();
                })
                .then(files => {
                    container.innerHTML = ''; // Clear loader

                    if (files.message && files.message.includes("Not Found")) {
                        displayMessage("Could not find the 'saves' directory. Make sure it exists in your repository and contains your save files.");
                        return;
                    }

                    const saveFiles = files.filter(file => file.type === 'file' && file.name.endsWith('.zip'));

                    if (saveFiles.length === 0) {
                        displayMessage("No .zip save files found in the 'saves' directory. Add some and they'll appear here!");
                        return;
                    }

                    saveFiles.forEach((file, index) => {
                        const saveName = file.name.replace('.zip', '').replace(/[-_]/g, ' ');
                        const downloadUrl = file.download_url;
                        const fileSize = formatBytes(file.size);

                        const card = document.createElement('div');
                        card.className = 'save-card';
                        card.style.animationDelay = `${index * 100}ms`;

                        card.innerHTML = `
                            <div class="card-content">
                                <h2>${saveName}</h2>
                                <p>File: ${file.name}</p>
                                <p>Size: ${fileSize}</p>
                            </div>
                            <a href="${downloadUrl}" class="download-button" download>
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="24" height="24"><path d="M12 15.586l-4.293-4.293a1 1 0 011.414-1.414L11 12.172V4a1 1 0 112 0v8.172l1.879-1.879a1 1 0 111.414 1.414L12 15.586zM2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12zm18 0a8 8 0 10-16 0 8 8 0 0016 0z"></path></svg>
                                <span>Download Save</span>
                            </a>
                        `;
                        container.appendChild(card);
                    });
                })
                .catch(error => {
                    console.error('Error fetching save files:', error);
                    displayMessage('Failed to load save files. Check the browser console for more details.');
                });
        });
    </script>
</body>
</html>
